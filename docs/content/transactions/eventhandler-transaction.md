# 事件处理与事物

## 领域事件与事务

`领域事件`与`命令`会运行在同一个数据库事务中，如果`领域事件处理器`抛出异常，事务会回滚，`命令`和`领域事件`的操作都会回滚。

## 集成事件与事务

`集成事件`的保存与`命令`会运行在同一个数据库事务中，一旦事务提交，`集成事件`也会被`CAP`组件保存到数据库中，并发送到`MQ`中。

`集成事件处理器`的处理与发起它的`命令`是在不同的事务中，如果`集成事件处理器`抛出异常，`集成事件`会被`CAP`组件记录并重试，`命令`的操作不会回滚。
